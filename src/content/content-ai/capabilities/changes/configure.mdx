---
title: 配置 AI 变更扩展
meta:
  title: 配置 AI 变更 | Tiptap 内容 AI
  description: 配置 AI 变更扩展。自定义在您的富文本编辑器中显示 AI 生成内容的方式。
  category: 内容 AI
---

Tiptap 的 AI 变更扩展提供了多种配置选项，以自定义其外观和行为。

## 自定义样式

`getCustomDecorations` 函数允许您控制被修改文本的外观。可以为文本应用自定义 CSS 类，还可以在其前后添加自定义元素。这对于显示弹出框、工具提示或图标非常有用。

它接受以下参数：

- `change`：当前的变更对象，包含被修改的内容信息
- `changes`：文档中所有检测到的变更列表
- `isSelected`：布尔值，指示当前变更是否被选中（光标位于其中）
- `getDefaultDecorations`：一个函数，返回变更的默认装饰。如果未提供 `getCustomDecorations` 函数，则使用默认装饰
- `editor`：Tiptap 编辑器实例
- `previousDoc`：AI 变更前的文档快照
- `currentDoc`：AI 变更后的当前文档

```ts
AiChanges.configure({
  getCustomDecorations({ change, isSelected, getDefaultDecorations }) {
    // 可以将 AI 变更扩展的默认装饰与您的自定义装饰结合使用
    const decorations = getDefaultDecorations()

    // 当变更被选中时，在插入的文本后添加自定义元素
    if (isSelected) {
      decorations.push(
        Decoration.widget(change.newRange.to, () => {
          const element = document.createElement('span')
          element.textContent = '✅'
          return element
        }),
      )
    }
    return decorations
  },
})
```

自定义样式和元素是通过 [Prosemirror Decorations API](https://prosemirror.net/docs/ref/#view.Decorations) 实现的。

如果希望在选中变更时显示弹出框，请参考 [本指南](/content-ai/capabilities/changes/features/display-changes#show-a-popover-when-a-change-is-selected)。