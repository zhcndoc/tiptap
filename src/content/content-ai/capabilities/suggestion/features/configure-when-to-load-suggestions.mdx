---
title: 配置何时加载建议
meta:
  title: 加载建议 | Tiptap AI 建议
  description: 通过 loadOnStart 和 reloadOnUpdate 等选项自定义 AI 建议扩展加载建议的时机。
  category: 内容 AI
---

您可以自定义 AI 建议扩展调用大语言模型（LLM）生成建议的时机。这允许您控制何时加载新建议，以及重新加载的频率。

## 启动时加载建议

默认情况下，AI 建议扩展会在编辑器就绪时自动加载建议。您可以通过 `loadOnStart` 选项禁用此行为。

```ts
AiSuggestion.configure({
  // 禁用自动加载建议
  loadOnStart: false,
})
```

## 内容更新时重新加载建议

默认情况下，AI 建议扩展会在编辑器内容变化时重新加载建议。您可以通过 `reloadOnUpdate` 选项禁用此行为。

```ts
AiSuggestion.configure({
  // 禁用自动重新加载建议
  reloadOnUpdate: false,
})
```

## 防抖超时

默认情况下，AI 建议扩展会在用户停止输入后等待 800 毫秒才重新加载建议。这样可以防止频繁调用 API。您可以使用 `debounceTimeout` 选项配置该超时。

```ts
AiSuggestion.configure({
  debounceTimeout: 1000,
})
```

但是，有时您可能想强制重新加载建议。例如，用户点击“刷新”按钮时可能想重新加载建议。

要手动重新加载建议，请使用 `loadAiSuggestions` 命令。

```ts
editor.commands.loadAiSuggestions()
```

要延迟加载建议，请使用 `loadAiSuggestionsDebounced` 命令。延迟时间由 `debounceTimeout` 选项决定。

此命令在内部用于在编辑器内容更改后重新加载建议（例如用户输入时）。该函数经过防抖处理，因此如果在防抖时间内被多次调用，只有最后一次调用会被执行。

```ts
editor.commands.loadAiSuggestionsDebounced()
```

## 编程方式设置建议

如果您想将建议设置为特定值，而不通过配置的 API 加载它们，可以使用 `setAiSuggestions` 命令。以下情况特别有用：

- 您已经有一组建议，并希望立即显示。
- 您想清空建议。
- 您想显示来自不同于扩展选项中配置的 API 的建议。

```ts
editor.commands.setAiSuggestions(suggestions)
```

想了解建议对象应包含的数据详情，请参考 [API 参考](/content-ai/capabilities/suggestion/api-reference#proofreading-suggestions)。