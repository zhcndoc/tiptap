---
title: 为用户消息添加上下文
meta:
  title: 添加上下文 | Tiptap 内容 AI
  description: 学习如何为用户消息添加上下文
  category: 内容 AI
---

在 AI 代理中，上下文是补充用户请求的数据。有时，它对于完成任务至关重要。

例如，在多文档 AI 代理中，如果用户提到了某个文档，也应该将该文档的 ID 作为上下文发送。

通过使用 `context` 选项，在创建用户消息时提供上下文。

```ts
provider.addUserMessage('总结所选文档', {
  context: '所选文档 ID 是：12345',
})
```

## 通过引用插入上下文

在许多 AI 聊天机器人中，用户可以通过引用文件和其他用户来提及他们：`@John`、`#file-123` 等。你可以通过将提示输入定义为 Tiptap 文本编辑器，并安装 [Mention 扩展](/editor/extensions/nodes/mention) 来实现此功能。

## 将选定内容作为上下文添加

将编辑器中选定的内容作为上下文发送给 AI 代理，可以帮助其理解用户的请求，并仅对该选定内容进行准确的编辑。

为了让 AI 模型了解选定的内容，将 `addSelection` 选项设置为 `true`。这会将选定内容作为上下文发送给 AI 代理。

```ts
provider.addUserMessage('总结所选文档', {
  addSelection: true, // 默认为 false
})
```