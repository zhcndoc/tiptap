---
title: 限流
meta:
  title: 限流 | Hocuspocus 文档
  category: Hocuspocus
tags:
  - type: image
    src: https://img.shields.io/npm/v/@hocuspocus/extension-throttle.svg?label=version
    url: https://www.npmjs.com/package/@hocuspocus/extension-throttle
    label: 版本
  - type: image
    src: https://img.shields.io/npm/dm/@hocuspocus/extension-throttle.svg
    url: https://npmcharts.com/compare/@hocuspocus/extension-throttle?minimal=true
    label: 下载量
  - type: image
    src: https://img.shields.io/npm/l/@hocuspocus/extension-throttle.svg
    url: https://www.npmjs.com/package/@hocuspocus/extension-throttle
    label: 许可
  - type: image
    src: https://img.shields.io/badge/chat-on%20discord-7289da.svg?sanitize=true
    url: https://discord.gg/WtJ49jGshW
    label: 讨论
---

此扩展限制连接尝试次数，并且在超过配置的阈值时禁止该 IP 地址。

确保在 **其他扩展之前** 注册它！

## 安装

使用以下命令安装限流包：

```bash
npm install @hocuspocus/extension-throttle
```

## 配置

```js
import { Server } from "@hocuspocus/server";
import { Throttle } from "@hocuspocus/extension-throttle";

const server = new Server({
  extensions: [
    new Throttle({
      // [可选] 允许每个 IP 地址每分钟最多尝试连接 15 次。
      // 设置为 null 或 false 可禁用限流，默认为 15
      throttle: 15,

      // [可选] 达到阈值后禁止 IP 地址 5 分钟
      // 默认为 5
      banTime: 5,
    }),
  ],
});

server.listen();
```