---
title: 代码块扩展
tags:
  - type: image
    src: https://img.shields.io/npm/v/@tiptap/extension-code-block/next?label=版本
    url: https://www.npmjs.com/package/@tiptap/extension-code-block
    label: 版本
  - type: image
    src: https://img.shields.io/npm/dm/@tiptap/extension-code-block.svg
    url: https://npmcharts.com/compare/@tiptap/extension-code-block?minimal=true
    label: 下载量
extension:
  name: 代码块
  link: https://github.com/ueberdosis/tiptap/tree/main/packages/extension-code-block
  description: 代码越少越好，但有时你就是需要多行代码。
  type: node
  icon: 代码
meta:
  title: 代码块扩展 | Tiptap 编辑器文档
  description: 在 Tiptap 中使用代码块扩展为你的文档添加围栏代码块。在我们的文档中了解更多信息！
  category: 编辑器
---

import { Callout } from '@/components/ui/Callout'
import { CodeDemo } from '@/components/CodeDemo'

使用代码块扩展可以为你的文档添加围栏代码块。它会将代码包裹在 `<pre>` 和 `<code>` HTML 标签中。

输入 <code>&grave;&grave;&grave; </code>（三个反引号和一个空格）或 <code>&Tilde;&Tilde;&Tilde; </code>（三个波浪号和一个空格），代码块会立即为你添加。你甚至可以指定语言，试着写 <code>&grave;&grave;&grave;css </code>。这应该会为 `<code>` 标签添加一个 `language-css` 类。

<Callout title="无语法高亮" variant="hint">
  代码块扩展没有样式，并且没有内置语法高亮。如果你在寻找具有语法高亮的代码块，请尝试
  [CodeBlockLowlight](/editor/extensions/nodes/code-block-lowlight) 扩展。
</Callout>

<CodeDemo path="/Nodes/CodeBlock" />

## 安装

```bash
npm install @tiptap/extension-code-block@next
```

## 用法

```js
import { Details, DetailsSummary, DetailsContent } from '@tiptap-pro/extension-details'

const editor = new Editor({
  extensions: [Details, DetailSummary, DetailsContent],
})
```

## 设置

### languageClassPrefix

为应用于代码标签的语言类添加前缀。

默认值：`'language-'`

```js
CodeBlock.configure({
  languageClassPrefix: 'language-',
})
```

### exitOnTripleEnter

定义在三次回车时是否退出该节点。

默认值：`true`

```js
CodeBlock.configure({
  exitOnTripleEnter: false,
})
```

### defaultLanguage

定义一个默认语言，而不是自动检测语法高亮。

默认值：`null`

```js
CodeBlock.configure({
  defaultLanguage: 'plaintext',
})
```

### exitOnArrowDown

定义在箭头向下且后面没有节点时是否退出该节点。

默认值：`true`

```js
CodeBlock.configure({
  exitOnArrowDown: false,
})
```

### HTMLAttributes

应添加到渲染的 HTML 标签的自定义 HTML 属性。

```js
CodeBlock.configure({
  HTMLAttributes: {
    class: 'my-custom-class',
  },
})
```

## 命令

### setCodeBlock()

将内容包裹在代码块中。

```js
editor.commands.setCodeBlock()
```

### toggleCodeBlock()

切换代码块。

```js
editor.commands.toggleCodeBlock()
```

## 键盘快捷键

| 命令            | Windows/Linux                                      | macOS                                          |
| --------------- | -------------------------------------------------- | ---------------------------------------------- |
| toggleCodeBlock | <kbd>Control</kbd> + <kbd>Alt</kbd> + <kbd>C</kbd> | <kbd>Cmd</kbd> + <kbd>Alt</kbd> + <kbd>C</kbd> |

## 源代码

[packages/extension-code-block/](https://github.com/ueberdosis/tiptap/blob/main/packages/extension-code-block/)