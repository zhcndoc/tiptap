---
title: CodeBlockLowlight 扩展
tags:
  - type: image
    src: https://img.shields.io/npm/v/@tiptap/extension-code-block-lowlight/next?label=version
    url: https://www.npmjs.com/package/@tiptap/extension-code-block-lowlight
    label: 版本
  - type: image
    src: https://img.shields.io/npm/dm/@tiptap/extension-code-block-lowlight.svg
    url: https://npmcharts.com/compare/@tiptap/extension-code-block-lowlight?minimal=true
    label: 下载量
extension:
  name: CodeBlock Lowlight
  link: https://github.com/ueberdosis/tiptap/tree/main/packages/extension-code-block-lowlight
  description: 为您的代码块添加一些彩色的语法高亮。
  type: node
  icon: 代码
meta:
  title: CodeBlockLowlight 扩展 | Tiptap 编辑器文档
  description: 使用 CodeBlockLowlight 扩展为您的文档添加带有语法高亮的代码块。欲了解更多信息，请查看我们的文档！
  category: 编辑器
---

import { Callout } from '@/components/ui/Callout'
import { CodeDemo } from '@/components/CodeDemo'

使用 CodeBlockLowlight 扩展，您可以向文档中添加围栏代码块。它将用 `<pre>` 和 `<code>` HTML 标签包装代码。

<Callout title="语法高亮依赖" variant="warning">
  此扩展依赖于 [lowlight](https://github.com/wooorm/lowlight) 库来对代码块的内容应用
  语法高亮。
</Callout>

输入 <code>&grave;&grave;&grave; </code>（三个反引号和一个空格）或 <code>&Tilde;&Tilde;&Tilde; </code>（三个波浪号和一个空格），则会立即为您添加一个代码块。您甚至可以指定语言，尝试输入 <code>&grave;&grave;&grave;css </code>。这将为 `<code>` 标签添加一个 `language-css` 类。

<CodeDemo path="/Nodes/CodeBlockLowlight" />

## 安装

```bash
npm install lowlight @tiptap/extension-code-block-lowlight@beta
```

## 设置

### lowlight

您应该向此扩展提供 `lowlight` 模块。将 `lowlight`
包与扩展解耦允许客户端应用程序控制其使用的
lowlight 版本及其需要加载的编程语言包。

```js
import { lowlight } from 'lowlight/lib/core'

CodeBlockLowlight.configure({
  lowlight,
})
```

### HTMLAttributes

自定义 HTML 属性，这些属性应添加到渲染的 HTML 标签中。

```js
CodeBlockLowlight.configure({
  HTMLAttributes: {
    class: 'my-custom-class',
  },
})
```

### languageClassPrefix

为应用于代码标签的语言类添加前缀。

默认值: `'language-'`

```js
CodeBlockLowlight.configure({
  languageClassPrefix: 'language-',
})
```

### defaultLanguage

定义一个默认语言，而不是自动检测 lowlight。

默认值: `null`

```js
CodeBlockLowlight.configure({
  defaultLanguage: 'plaintext',
})
```

## 命令

### setCodeBlock()

将内容包装在代码块中。

```js
editor.commands.setCodeBlock()
```

### toggleCodeBlock()

切换代码块。

```js
editor.commands.toggleCodeBlock()
```

## 键盘快捷键

| 命令            | Windows/Linux                                      | macOS                                          |
| --------------- | -------------------------------------------------- | ---------------------------------------------- |
| toggleCodeBlock | <kbd>Control</kbd> + <kbd>Alt</kbd> + <kbd>C</kbd> | <kbd>Cmd</kbd> + <kbd>Alt</kbd> + <kbd>C</kbd> |

## 源代码

[packages/extension-code-block-lowlight/](https://github.com/ueberdosis/tiptap/blob/main/packages/extension-code-block-lowlight/)