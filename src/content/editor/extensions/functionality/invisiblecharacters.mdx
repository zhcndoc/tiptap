---
tags:
  - type: pro
title: 隐形字符扩展
meta:
  title: 隐形字符扩展 | Tiptap 编辑器文档
  description: 允许用户查看空格、硬换行和段落等隐形字符。更多信息请查阅文档！
  category: 编辑器
extension:
  name: 隐形字符
  description: '允许用户查看空格、硬换行和段落等隐形字符。'
  type: extension
  icon: 星号
  isPro: true
---

import { Callout } from '@/components/ui/Callout'
import { CodeDemo } from '@/components/CodeDemo'
import { Requirements, RequirementItem } from '@/components/Requirements'

<Requirements>
    <RequirementItem label="1. 激活试用或订阅">
        在您的账户中 [开始免费的试用](https://cloud.tiptap.dev/v2/billing) 或订阅 [Tiptap 计划](https://cloud.tiptap.dev/v2/billing)。
    </RequirementItem>
    <RequirementItem label="2. 从私有注册表安装">
        要安装这个前端扩展，请按照 [设置指南](/guides/pro-extensions) 进行身份验证，以访问 Tiptap 的私有 npm 注册表。
    </RequirementItem>
</Requirements>

此扩展添加装饰器以显示不可打印字符，并帮助您提高可及性。

<CodeDemo isPro path="/Extensions/InvisibleCharacters" />

## 安装

<Callout title="设置访问 Tiptap 私有库" variant="info">
  通过注册一个免费的 [Tiptap
  账户](https://cloud.tiptap.dev/register) 集成此专业扩展，并按照我们的 [访问
  指南](/guides/pro-extensions) 访问 Tiptap 的私有库。
</Callout>

```bash
npm install @tiptap-pro/extension-invisible-characters@next
```

## 设置

### visible

定义默认可见性。

默认: `true`

```js
InvisibleCharacters.configure({
  visible: false,
})
```

### builders

一个包含隐形字符的数组 – 默认包括: 空格、硬换行和段落。

默认: `[new SpaceCharacter(), new HardBreakNode(), new ParagraphNode()]`

```js
import InvisibleCharacters, { SpaceCharacter } from '@tiptap-pro/extension-invisible-characters'

// [...]

InvisibleCharacters.configure({
  builders: [new SpaceCharacter(), new YourCustomInvisibleCharacter()],
})
```

### injectCSS

默认情况下，该扩展会注入一些 CSS。通过 `injectCSS` 您可以禁用此功能。

默认: `true`

```js
InvisibleCharacters.configure({
  injectCSS: false,
})
```

### injectNonce

当您使用带有 `nonce` 的 [内容安全策略](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy) 时，您可以指定一个 `nonce`，以添加到动态创建的元素中。以下是示例：

默认: `undefined`

```js
InvisibleCharacters.configure({
  injectCSS: false,
  injectNonce: 'your-nonce-here',
})
```

## 存储

### visibility()

确定隐形字符的可见性是否处于活动状态。

```js
editor.storage.invisibleCharacters.visibility()
```

## 命令

### showInvisibleCharacters()

显示隐形字符。您也可以传递 `false` 来使用相同的命令隐藏它们。

```js
editor.commands.showInvisibleCharacters()
```

### hideInvisibleCharacters()

隐藏隐形字符。

```js
editor.commands.hideInvisibleCharacters()
```

### toggleInvisibleCharacters()

切换隐形字符的可见性。

```js
editor.commands.toggleInvisibleCharacters()
```

## 自定义隐形字符

要创建自定义隐形字符，您可以扩展包中提供的类。

### InvisibleCharacter

```js
import InvisibleCharacters, { InvisibleCharacter } from '@tiptap-pro/extension-invisible-characters'

class MyInvisibleCharacter extends InvisibleCharacter {
  constructor() {
    super({
      type: 'my-invisible-character',
      predicate: (value) => value === '+',
    })
  }
}

// … 使用方式如下
new Editor({
  extensions: [InvisibleCharacters.configure({ builders: [new MyInvisibleCharacter()] })],
})
```

要在 CSS 中选择装饰，可以使用以下选择器：

```css
.Tiptap-invisible-character.Tiptap-invisible-character--my-invisible-character {
  // …
}
```

### InvisibleNode

```js
import InvisibleCharacters, { InvisibleNode } from '@tiptap-pro/extension-invisible-characters'

class MyInvisibleNode extends InvisibleNode {
  constructor() {
    super({
      type: 'my-invisible-node',
      predicate: (node) => node.type === node.type.schema.nodes.listItem,
    })
  }
}

// … 使用方式如下
new Editor({
  extensions: [InvisibleCharacters.configure({ builders: [new MyInvisibleNode()] })],
})
```

要在 CSS 中选择装饰，可以使用以下选择器：

```css
.Tiptap-invisible-character.Tiptap-invisible-character--my-invisible-node {
  // …
}
```