---
title: 撤销/重做扩展
tags:
  - type: image
    src: https://img.shields.io/npm/v/@tiptap/extensions/next?label=版本
    url: https://www.npmjs.com/package/@tiptap/extensions
    label: 版本
  - type: image
    src: https://img.shields.io/npm/dm/@tiptap/extensions.svg
    url: https://npmcharts.com/compare/@tiptap/extensions?minimal=true
    label: 下载量
meta:
  title: 撤销/重做扩展 | Tiptap 编辑器文档
  description: 轻松在您的 Tiptap 编辑器中撤销和重做更改，允许您恢复或重新应用编辑。更多内容见文档。
  category: 编辑器
extension:
  name: 撤销/重做
  description: 轻松在您的 Tiptap 编辑器中撤销和重做更改，允许您恢复或重新应用编辑。
  type: 扩展
  icon: Undo2
---

import { CodeDemo } from '@/components/CodeDemo'

此扩展提供撤销和重做支持。对文档的所有更改将被记录，并可以通过 `undo` 删除。被撤销的更改可以再次通过 `redo` 应用。

如果您不打算使编辑器具有协作功能，则应仅整合此扩展。协作扩展具有自己的撤销/重做支持，因为人们通常不希望撤销他人所做的更改。

<CodeDemo path="/Extensions/UndoRedo" />

## 安装

```bash
npm install @tiptap/extensions@beta
```

## 用法

```js
import { Editor } from '@tiptap/core'
import { UndoRedo } from '@tiptap/extensions'

new Editor({
  extensions: [UndoRedo],
})
```

## 设置

### depth

收集的历史事件数量，超过此数量后，最旧的事件将被丢弃。

默认值: `100`

```js
UndoRedo.configure({
  depth: 10,
})
```

### newGroupDelay

更改之间的延迟，在此之后应开始一个新组（以毫秒为单位）。当更改不相邻时，总是会开始一个新组。

默认值: `500`

```js
UndoRedo.configure({
  newGroupDelay: 1000,
})
```

## 命令

### undo()

撤销最后一次更改。

```js
editor.commands.undo()
```

### redo()

重做最后一次更改。

```js
editor.commands.redo()
```

## 快捷键

| 命令  | Windows/Linux                                                                                                                                    | macOS                                                                                                                                 |
| ----- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| undo()  | <kbd>Control</kbd> + <kbd>Z</kbd> 或 <kbd>Control</kbd> + <kbd>я</kbd>                                                                            | <kbd>Cmd</kbd> + <kbd>Z</kbd> 或 <kbd>Cmd</kbd> + <kbd>я</kbd>                                                                      |
| redo()  | <kbd>Shift</kbd> + <kbd>Control</kbd> + <kbd>Z</kbd> 或 <kbd>Control</kbd> + <kbd>Y</kbd> 或 <kbd>Shift</kbd> + <kbd>Control</kbd> + <kbd>я</kbd> | <kbd>Shift</kbd> + <kbd>Cmd</kbd> + <kbd>Z</kbd> 或 <kbd>Cmd</kbd> + <kbd>Y</kbd> 或 <kbd>Shift</kbd> + <kbd>Cmd</kbd> + <kbd>я</kbd> |

## 源代码

[packages/extensions/src/undo-redo/](https://github.com/ueberdosis/tiptap/blob/main/packages/extensions/src/undo-redo/)

## 最小安装

```js
import { Editor } from '@tiptap/core'
import { UndoRedo } from '@tiptap/extensions/undo-redo'

new Editor({
  extensions: [UndoRedo],
})
```