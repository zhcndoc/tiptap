---
title: Next.js
meta:
  title: Next.js | Tiptap ç¼–è¾‘å™¨æ–‡æ¡£
  description: å­¦ä¹ å¦‚ä½•å°† Tiptap é›†æˆåˆ° Next.js ä¸­ï¼Œä¸ºæ‚¨çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªå¤šåŠŸèƒ½ä¸”å¼ºå¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚
  category: ç¼–è¾‘å™¨
---

ä½¿ç”¨æ­¤é€æ­¥æŒ‡å—å°† Tiptap é›†æˆåˆ°æ‚¨çš„ Next.js é¡¹ç›®ä¸­ã€‚

### è¦æ±‚

- æœºå™¨ä¸Šå·²å®‰è£… [Node](https://nodejs.org/en/download/)
- å…·å¤‡ [React](https://reactjs.org/) ä½¿ç”¨ç»éªŒ

## åˆ›å»ºé¡¹ç›®ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨å·²æœ‰ç°æˆçš„ Next.js é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ã€‚

æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†æ–°å»ºä¸€ä¸ªåä¸º `my-tiptap-project` çš„ Next.js é¡¹ç›®ã€‚ä»¥ä¸‹å‘½ä»¤å°†è®¾ç½®æˆ‘ä»¬å¼€å§‹æ‰€éœ€çš„ä¸€åˆ‡ã€‚

```bash
# åˆ›å»ºé¡¹ç›®
npx create-next-app my-tiptap-project

# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-tiptap-project
```

### å®‰è£…ä¾èµ–

ç°åœ¨æˆ‘ä»¬å·²æœ‰ä¸€ä¸ªæ ‡å‡†çš„æ ·æ¿é¡¹ç›®ï¼Œå¯ä»¥å¼€å§‹é…ç½® Tiptap äº†ï¼ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸‰ä¸ªåŒ…ï¼š`@tiptap/react`ã€`@tiptap/pm` å’Œ `@tiptap/starter-kit`ï¼Œåè€…åŒ…æ‹¬æ‰€æœ‰å¿«é€Ÿå…¥é—¨æ‰€éœ€çš„æ‰©å±•ã€‚

```bash
npm install @tiptap/react@beta @tiptap/pm@beta @tiptap/starter-kit@beta
```

å¦‚æœæ‚¨æŒ‰ç…§æ­¥éª¤ 1 å’Œ 2 è¿›è¡Œæ“ä½œï¼Œç°åœ¨å¯ä»¥è¿è¡Œ `npm run dev` å¯åŠ¨é¡¹ç›®ï¼Œå¹¶åœ¨æ‚¨å–œæ¬¢çš„æµè§ˆå™¨ä¸­æ‰“å¼€ [http://localhost:3000/](http://localhost:3000/)ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯å·²æœ‰é¡¹ç›®ï¼Œå…·ä½“æ–¹å¼å¯èƒ½æœ‰æ‰€ä¸åŒã€‚

## é›†æˆ Tiptap

è¦å¼€å§‹ä½¿ç”¨ Tiptapï¼Œæ‚¨éœ€è¦å‘åº”ç”¨æ·»åŠ ä¸€ä¸ªæ–°ç»„ä»¶ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º `components/` çš„ç›®å½•ã€‚æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªåä¸º `Tiptap` çš„ç»„ä»¶ï¼Œå°†ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ·»åŠ åˆ° `components/Tiptap.jsx` ä¸­ã€‚

```jsx
'use client'

import { useEditor, EditorContent } from '@tiptap/react'
import StarterKit from '@tiptap/starter-kit'

const Tiptap = () => {
  const editor = useEditor({
    extensions: [StarterKit],
    content: '<p>Hello World! ğŸŒï¸</p>',
    // ä¸ç«‹å³åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ä»¥é¿å… SSR é—®é¢˜
    immediatelyRender: false,
  })

  return <EditorContent editor={editor} />
}

export default Tiptap
```

### å°†ç»„ä»¶æ·»åŠ åˆ°åº”ç”¨ä¸­

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ›¿æ¢ `app/page.js`ï¼ˆå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Pages è·¯ç”±ï¼Œåˆ™æ›¿æ¢ `pages/index.js`ï¼‰çš„å†…å®¹ï¼Œå°† `Tiptap` ç»„ä»¶é›†æˆåˆ°åº”ç”¨é‡Œã€‚

```jsx
import Tiptap from '../components/Tiptap'

export default function Home() {
  return <Tiptap />
}
```

ç°åœ¨æ‚¨åº”è¯¥èƒ½åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ° Tiptapï¼Œç»™è‡ªå·±ç‚¹ä¸ªèµå§ï¼:)

### åœ¨ Next.js ä¸­ä½¿ç”¨ yjs

ä¸ºé¿å…å‡ºç°é”™è¯¯ï¼šâ€œYjs was already imported. This breaks constructor checks and will lead to issues!â€ï¼Œè¯·åœ¨æ‚¨çš„ Next.js é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚æ ¹æ®æ‚¨çš„ `node_modules` ç›®å½•æ‰€åœ¨ä½ç½®ï¼Œæ‚¨å¯èƒ½éœ€è¦å°† `'node_modules/yjs'` è°ƒæ•´ä¸º `'../node_modules/yjs'` æˆ– `'../../node_modules/yjs'`ã€‚

```js
const path = require('path')

module.exports = {
  webpack: (config, { isServer }) => {
    if (!isServer) {
      // ç¡®ä¿æ‰€æœ‰ 'yjs' çš„å¯¼å…¥éƒ½è§£æä¸ºåŒä¸€ä¸ªå®ä¾‹
      config.resolve.alias['yjs'] = path.resolve(__dirname, 'node_modules/yjs')
    }
    return config
  },
}
```

å…³äºæ­¤é—®é¢˜çš„è®¨è®ºå’Œä¿®å¤æ–¹æ¡ˆï¼Œè¯·å‚è§ [Github](https://github.com/yjs/yjs/issues/438#issuecomment-2225079409)ã€‚