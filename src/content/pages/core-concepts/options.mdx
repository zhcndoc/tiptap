---
title: 页扩展 API 参考
meta:
  title: API 参考 | Tiptap 页扩展
  description: Tiptap 页扩展选项的 API 参考。
  category: 页
---

import { Callout } from '@/components/ui/Callout'

```js
interface PagesOptions {
  /**
   * 页面格式，决定页面尺寸和边距。
   * 可以是内置格式名称或自定义页面格式对象。
   * 内置格式：A4、A3、A5、Letter、Legal、Tabloid
   * @default 'A4'
   */
  pageFormat: 'A4' | 'A3' | 'A5' | 'Letter' | 'Legal' | 'Tabloid' | PageFormat

  /**
   * 页面页眉高度，单位像素。
   * @default 50
   */
  headerHeight?: number

  /**
   * 页面页脚高度，单位像素。
   * @default 50
   */
  footerHeight?: number

  /**
   * 页面间距，单位像素。
   * @default 50
   */
  pageGap?: number

  /**
   * 每页的页眉内容，可以是字符串（支持占位符）或函数。
   * @default ''
   */
  header?: string | ((page: number, total: number) => string)

  /**
   * 每页的页脚内容，可以是字符串（支持占位符）或函数。
   * @default ''
   */
  footer?: string | ((page: number, total: number) => string)

  /**
   * 分页区域的背景颜色。
   * @default undefined
   */
  pageBreakBackground?: string

  /**
   * 页面格式变化时调用的回调函数。
   * 接收新的页面格式作为参数。
   * @default () => {}
   */
  onPageFormatChange?: (pageFormat: PageFormat) => void
}

interface PageFormat {
  name: string
  width: number    // 宽度，单位像素
  height: number   // 高度，单位像素
  margins: {
    top: number    // 上边距，单位像素
    right: number  // 右边距，单位像素
    bottom: number // 下边距，单位像素
    left: number   // 左边距，单位像素
  }
}
```

| 选项                  | 类型 / 值                    | 默认值      | 描述                                                                                     |
|-----------------------|------------------------------|-------------|------------------------------------------------------------------------------------------|
| `pageFormat`          | `string \| PageFormat`       | `'A4'`      | 内置格式名或自定义页面格式对象                                                          |
| `headerHeight`        | `number`（像素）             | `50`        | 页眉高度（像素）                                                                         |
| `footerHeight`        | `number`（像素）             | `50`        | 页脚高度（像素）                                                                         |
| `pageGap`             | `number`（像素）             | `50`        | 页面间距（像素）                                                                         |
| `header`              | `string \| fn`               | `''`        | 页眉内容；字符串（支持 `{page}`/`{total}` 占位符）或 `(pageNumber, totalPages) => string` 函数 |
| `footer`              | `string \| fn`               | `'{page}'`  | 页脚内容；字符串（支持 `{page}`/`{total}` 占位符）或 `(pageNumber, totalPages) => string` 函数 |
| `pageBreakBackground` | `string`（CSS 颜色）          | `undefined` | 分页区域背景色                                                                          |
| `onPageFormatChange`  | `fn`                         | `() => {}`  | 页面格式变化回调，接收新的 PageFormat 参数                                             |

## 示例用法

### 使用内置格式的基本配置

```js
import { Pages } from '@tiptap-pro/extension-pages'

const editor = new Editor({
  extensions: [
    Pages.configure({
      pageFormat: 'A4',
      headerHeight: 60,
      footerHeight: 40,
      pageGap: 40,
      header: '我的项目',
      footer: (page, total) => `第 ${page} 页，共 ${total} 页`,
      pageBreakBackground: '#f8f8f8',
    }),
  ],
})
```

### 自定义页面格式配置

```js
import { Pages } from '@tiptap-pro/extension-pages'

const editor = new Editor({
  extensions: [
    Pages.configure({
      pageFormat: {
        name: '自定义格式',
        width: 600,
        height: 800,
        margins: {
          top: 40,
          right: 30,
          bottom: 40,
          left: 30,
        },
      },
      header: '自定义文档',
      footer: '{page} / {total}',
      onPageFormatChange: (pageFormat) => {
        console.log('页面格式已更改:', pageFormat.name)
        // 保存用户偏好，更新界面等操作
      },
    }),
  ],
})
```

## 可用命令

Pages 扩展提供以下命令：

| 命令               | 参数                     | 描述                          |
|--------------------|--------------------------|-------------------------------|
| `setPageFormat`    | `pageFormat: PageFormat` | 以编程方式更改页面格式         |

### 命令用法

```js
// 切换到内置格式
editor.commands.setPageFormat('Letter')

// 切换到自定义格式
editor.commands.setPageFormat({
  id: 'wide-page-format',
  width: 1000, // 像素
  height: 700, // 像素
  margins: { top: 20, right: 20, bottom: 20, left: 20 } // 像素
})
```

<Callout title="注意">
  <code>header</code> 和 <code>footer</code> 选项可以接受字符串（支持占位符 <code>{page}</code> 和 <code>{total}</code>）或函数 <code>(page, total) =&gt; string</code>，用以生成动态内容。
</Callout>